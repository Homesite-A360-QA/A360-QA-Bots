{"triggers":[],"nodes":[{"uid":"beead52d-520b-4e70-8103-9dd761fae44a","commandName":"Comment","packageName":"Comment","disabled":true,"attributes":[{"name":"comment","value":{"type":"STRING","string":"Try locking the folder for this machine ********************************"}}]},{"uid":"6339eec1-3de1-4264-87d7-e5a1cc247750","commandName":"Comment","packageName":"Comment","disabled":true,"attributes":[{"name":"comment","value":{"type":"STRING","string":"0.1 Initial status of LockingStatus flag"}}]},{"uid":"6df31b8c-fe62-4219-add7-8d3375afe21d","commandName":"assign","packageName":"String","disabled":false,"attributes":[{"name":"sourceString","value":{"type":"STRING","string":"false"}}],"returnTo":{"type":"VARIABLE","variableName":"varLockingStatus"}},{"uid":"5fff3d9a-67a2-4ddf-afd2-e86beeaa2d9b","commandName":"assign","packageName":"String","disabled":false,"attributes":[{"name":"sourceString","value":{"type":"STRING","expression":"$varLockingStatus.LegacyAutomation:parseVariableOperation$"}}],"returnTo":{"type":"VARIABLE","variableName":"varLockingStatus"}},{"uid":"63df8a6f-e478-43ad-b293-846a198fa742","commandName":"Comment","packageName":"Comment","disabled":true,"attributes":[{"name":"comment","value":{"type":"STRING","string":"0.2 Random delay if two machines trying to lock the folder simulatenously"}}]},{"uid":"887eecbe-eac5-43c9-80cc-ccc0b1f93392","commandName":"delay","packageName":"Delay","disabled":false,"attributes":[{"name":"from","value":{"type":"NUMBER","number":"1"}},{"name":"to","value":{"type":"NUMBER","number":"3"}},{"name":"timeUnit","value":{"type":"STRING","string":"SECONDS"}},{"name":"delayType","value":{"type":"STRING","string":"RANDOM"}}]},{"uid":"0f42eacd-a52a-4be2-bc64-9a01568c8752","commandName":"Comment","packageName":"Comment","disabled":true,"attributes":[{"name":"comment","value":{"type":"STRING","string":"----------"}}]},{"uid":"bd85ed0e-c3c3-4f66-8e0f-6d6cbd020b0f","commandName":"Comment","packageName":"Comment","disabled":true,"attributes":[{"name":"comment","value":{"type":"STRING","string":"1.1 Check if this machine has already locked the folder"}}]},{"uid":"8a9964fa-2925-441b-a50f-c1c5da1005ab","commandName":"systemInformation","packageName":"System","disabled":false,"attributes":[{"name":"systemNameBySelection","value":{"type":"STRING","string":"USERNAME","label":"USERNAME"}},{"name":"variableOption","value":{"type":"STRING","string":"BY_SELECTION"}}],"returnTo":{"type":"VARIABLE","variableName":"m-string-1"}},{"uid":"fd9d4627-043c-4ed5-bb00-1647102a9110","commandName":"if","packageName":"If","disabled":false,"children":[{"uid":"01a86007-9f81-4342-a3e1-ac6e1747d56a","commandName":"assign","packageName":"String","disabled":false,"attributes":[{"name":"sourceString","value":{"type":"STRING","string":"true"}}],"returnTo":{"type":"VARIABLE","variableName":"varLockingStatus"}},{"uid":"56beef18-a8e7-4d53-885a-995d28bd9efd","commandName":"assign","packageName":"String","disabled":false,"attributes":[{"name":"sourceString","value":{"type":"STRING","expression":"$varLockingStatus.LegacyAutomation:parseVariableOperation$"}}],"returnTo":{"type":"VARIABLE","variableName":"varLockingStatus"}},{"uid":"43ee8b74-c1f6-4661-8eb7-1c6e75740c09","commandName":"stopTask","packageName":"TaskBot","disabled":false}],"branches":[],"attributes":[{"name":"condition","attributes":[{"name":"sourceFilePath","value":{"type":"FILE","expression":"file://$varFolder$/$System:Machine$.$m-string-1$.lock"}},{"name":"waitTimeout","value":{"type":"NUMBER","number":"0"}}],"value":{"type":"CONDITIONAL","conditionalName":"fileExists","packageName":"File"}}]},{"uid":"4ef52806-550a-4b96-bbf9-173cd7037b15","commandName":"Comment","packageName":"Comment","disabled":true,"attributes":[{"name":"comment","value":{"type":"STRING","string":"1.2 Create lock file"}}]},{"uid":"ee142017-0af9-47f7-8ab4-0c080a4b83e8","commandName":"systemInformation","packageName":"System","disabled":false,"attributes":[{"name":"systemNameBySelection","value":{"type":"STRING","string":"USERNAME","label":"USERNAME"}},{"name":"variableOption","value":{"type":"STRING","string":"BY_SELECTION"}}],"returnTo":{"type":"VARIABLE","variableName":"m-string-1"}},{"uid":"95a13a2d-877d-4b31-8a74-e9b8dcbead30","commandName":"assign","packageName":"String","disabled":false,"attributes":[{"name":"sourceString","value":{"type":"STRING","expression":"$varFolder$\\$System:Machine$.$m-string-1$.lock"}}],"returnTo":{"type":"VARIABLE","variableName":"vTempPath"}},{"uid":"a36ca071-e5d3-4b66-91f3-d33397b52b65","commandName":"createFile","packageName":"File","disabled":false,"attributes":[{"name":"filePath","value":{"type":"FILE","expression":"file://$vTempPath$"}},{"name":"isOverwrite","value":{"type":"BOOLEAN","boolean":false}}]},{"uid":"9fe2ce19-6e3c-49da-a171-7b89d63806cd","commandName":"Comment","packageName":"Comment","disabled":true,"attributes":[{"name":"comment","value":{"type":"STRING","string":"----------"}}]},{"uid":"67abdec1-7e75-4c34-89b1-8c0c4f92004b","commandName":"Comment","packageName":"Comment","disabled":true,"attributes":[{"name":"comment","value":{"type":"STRING","string":"2. Check how many machines locked the folder"}}]},{"uid":"1e8c6854-871d-497a-b72c-eddca4b553b3","commandName":"assign","packageName":"String","disabled":false,"attributes":[{"name":"sourceString","value":{"type":"STRING","string":"0"}}],"returnTo":{"type":"VARIABLE","variableName":"varTemp"}},{"uid":"fd3554be-f8db-4d10-bf47-ede5fe0dcc60","commandName":"assign","packageName":"String","disabled":false,"attributes":[{"name":"sourceString","value":{"type":"STRING","expression":"$varTemp.LegacyAutomation:parseVariableOperation$"}}],"returnTo":{"type":"VARIABLE","variableName":"varTemp"}},{"uid":"ce725037-140b-432f-b044-2fcb6d0bcaf4","commandName":"assign","packageName":"String","disabled":false,"attributes":[{"name":"sourceString","value":{"type":"STRING","string":"0"}}],"returnTo":{"type":"VARIABLE","variableName":"Loop-Counter-1"}},{"uid":"7095360f-aad4-4256-98ad-53c5be393238","commandName":"loop.commands.start","packageName":"Loop","disabled":false,"children":[{"uid":"0830b10a-388a-40f7-9161-69359a83ba89","commandName":"assign","packageName":"String","disabled":false,"attributes":[{"name":"sourceString","value":{"type":"STRING","expression":"$Loop-Counter-1.LegacyAutomation:getIncrementedNumber.Number:toString$"}}],"returnTo":{"type":"VARIABLE","variableName":"Loop-Counter-1"}},{"uid":"0a883378-ea12-43f6-85b4-9040e2e1e755","commandName":"if","packageName":"If","disabled":false,"children":[{"uid":"d69a0151-14d7-4626-813b-9b5910296568","commandName":"assign","packageName":"String","disabled":false,"attributes":[{"name":"sourceString","value":{"type":"STRING","expression":"$varTemp$+1"}}],"returnTo":{"type":"VARIABLE","variableName":"varTemp"}},{"uid":"0820fb31-07e8-4718-8ed7-4bde9e04855b","commandName":"assign","packageName":"String","disabled":false,"attributes":[{"name":"sourceString","value":{"type":"STRING","expression":"$varTemp.LegacyAutomation:parseVariableOperation$"}}],"returnTo":{"type":"VARIABLE","variableName":"varTemp"}}],"branches":[],"attributes":[{"name":"condition","attributes":[{"name":"variable","value":{"type":"STRING","expression":"$Loop-Files-1{extension}$"}},{"name":"operator","value":{"type":"STRING","string":"EqualsTo"}},{"name":"value","value":{"type":"STRING","string":"lock"}}],"value":{"type":"CONDITIONAL","conditionalName":"legacyConditionVariable","packageName":"LegacyAutomation"}}]}],"attributes":[{"name":"iterator","returnTo":{"type":"VARIABLE","variableName":"Loop-Files-1"},"attributes":[{"name":"folderPath","value":{"type":"STRING","expression":"$varFolder$"}}],"value":{"type":"ITERATOR","iteratorName":"loop.iterators.files","packageName":"File"}},{"name":"loopType","value":{"type":"STRING","string":"ITERATOR"}}]},{"uid":"33175555-610e-43d1-a9ea-46ca80d5b870","commandName":"Comment","packageName":"Comment","disabled":true,"attributes":[{"name":"comment","value":{"type":"STRING","string":"If lockedBy>1 then remove the lock and set lockstatus=failed"}}]},{"uid":"7961f885-d17d-4434-9540-06a3a7b368e7","commandName":"if","packageName":"If","disabled":false,"children":[{"uid":"80b878f5-ff67-4d52-802e-568fb5941b86","commandName":"assign","packageName":"String","disabled":false,"attributes":[{"name":"sourceString","value":{"type":"STRING","string":"false"}}],"returnTo":{"type":"VARIABLE","variableName":"varLockingStatus"}},{"uid":"4b32ad4a-e511-4d65-8d96-b0b742cd6f5f","commandName":"assign","packageName":"String","disabled":false,"attributes":[{"name":"sourceString","value":{"type":"STRING","expression":"$varLockingStatus.LegacyAutomation:parseVariableOperation$"}}],"returnTo":{"type":"VARIABLE","variableName":"varLockingStatus"}},{"uid":"22e9efe2-caeb-472f-bb89-7eb9ce5a340e","commandName":"systemInformation","packageName":"System","disabled":false,"attributes":[{"name":"systemNameBySelection","value":{"type":"STRING","string":"USERNAME","label":"USERNAME"}},{"name":"variableOption","value":{"type":"STRING","string":"BY_SELECTION"}}],"returnTo":{"type":"VARIABLE","variableName":"m-string-1"}},{"uid":"64d93a1c-3ae1-4a57-8e29-afabc83f245c","commandName":"assign","packageName":"String","disabled":false,"attributes":[{"name":"sourceString","value":{"type":"STRING","expression":"$varFolder$\\$System:Machine$.$m-string-1$.lock"}}],"returnTo":{"type":"VARIABLE","variableName":"vTempPath"}},{"uid":"64cb40de-8bad-42c1-aadb-2a96dd681e75","commandName":"deleteFiles","packageName":"File","disabled":false,"attributes":[{"name":"filePath","value":{"type":"FILE","expression":"file://$vTempPath$"}},{"name":"isSize","value":{"type":"BOOLEAN","boolean":false}},{"name":"isDate","value":{"type":"BOOLEAN","boolean":false}}]}],"branches":[{"uid":"e5b343ee-e40c-45a4-9498-a300c0f3ca06","commandName":"else","packageName":"If","disabled":false,"children":[{"uid":"80f03a3d-cdeb-46c9-a544-5cd4fc96030c","commandName":"assign","packageName":"String","disabled":false,"attributes":[{"name":"sourceString","value":{"type":"STRING","string":"true"}}],"returnTo":{"type":"VARIABLE","variableName":"varLockingStatus"}},{"uid":"fccf0cf1-eb09-4b5b-b251-1486b8ca4f6f","commandName":"assign","packageName":"String","disabled":false,"attributes":[{"name":"sourceString","value":{"type":"STRING","expression":"$varLockingStatus.LegacyAutomation:parseVariableOperation$"}}],"returnTo":{"type":"VARIABLE","variableName":"varLockingStatus"}}]}],"attributes":[{"name":"condition","attributes":[{"name":"variable","value":{"type":"STRING","expression":"$varTemp$"}},{"name":"operator","value":{"type":"STRING","string":"GreaterThan"}},{"name":"value","value":{"type":"STRING","string":"1"}}],"value":{"type":"CONDITIONAL","conditionalName":"legacyConditionVariable","packageName":"LegacyAutomation"}}]},{"uid":"d15db1d9-4e3e-4bfd-8220-5fba6f3633bc","commandName":"Comment","packageName":"Comment","disabled":true,"attributes":[{"name":"comment","value":{"type":"STRING","string":"----------"}}]}],"variables":[{"name":"varFolder","description":"","type":"STRING","subtype":"UNDEFINED","input":true,"output":true,"defaultValue":{"type":"STRING","string":""}},{"name":"varTemp","description":"","type":"STRING","subtype":"UNDEFINED","input":true,"output":true,"defaultValue":{"type":"STRING","string":""}},{"name":"varLockingStatus","description":"","type":"STRING","subtype":"UNDEFINED","input":true,"output":true,"defaultValue":{"type":"STRING","string":""}},{"name":"Loop-Files","description":"","type":"DICTIONARY","subtype":"STRING","input":false,"output":false},{"name":"Loop-Files-1","description":"","type":"DICTIONARY","subtype":"STRING","input":false,"output":false},{"name":"Loop-Counter-1","description":"","type":"STRING","subtype":"UNDEFINED","input":false,"output":false},{"name":"m-string-1","description":"","type":"STRING","subtype":"UNDEFINED","input":false,"output":false},{"name":"vTempPath","description":"","type":"STRING","readOnly":false,"input":false,"output":false,"defaultValue":{"type":"STRING","string":""}}],"breakpoints":[],"packages":[{"name":"Comment","version":"2.7.0-20210722-143743"},{"name":"Delay","version":"3.1.0-20210722-143809"},{"name":"File","version":"5.0.0-20210727-180900"},{"name":"If","version":"3.0.0-20210722-143856"},{"name":"LegacyAutomation","version":"4.4.0-20210803-013138"},{"name":"Loop","version":"3.0.0-20210722-144335"},{"name":"Number","version":"3.1.1-20210821-042642"},{"name":"String","version":"4.3.0-20210722-144812"},{"name":"System","version":"3.4.0-20210728-133940"},{"name":"TaskBot","version":"2.1.0-20210716-100552"}],"migrationJournalReviewIds":[],"workItemTemplateName":null,"properties":{"botCodeVersion":"1","improvedNumberSupport":true,"timeout":"0s","automationPriority":"PRIORITY_LOW"}}