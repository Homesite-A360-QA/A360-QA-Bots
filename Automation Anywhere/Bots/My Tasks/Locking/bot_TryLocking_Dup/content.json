{"triggers":[],"nodes":[{"uid":"63766253-7d49-4f23-a7af-8745c0242b35","commandName":"Comment","packageName":"Comment","disabled":true,"attributes":[{"name":"comment","value":{"type":"STRING","string":"Try locking the folder for this machine ********************************"}}]},{"uid":"840a4a09-6c66-4778-a4ac-fce66fa8401e","commandName":"Comment","packageName":"Comment","disabled":true,"attributes":[{"name":"comment","value":{"type":"STRING","string":"0.1 Initial status of LockingStatus flag"}}]},{"uid":"95ab5c28-6c78-4b08-8038-f6c70070ada3","commandName":"assign","packageName":"String","disabled":false,"attributes":[{"name":"sourceString","value":{"type":"STRING","string":"false"}}],"returnTo":{"type":"VARIABLE","variableName":"varLockingStatus"}},{"uid":"63bfc7de-e442-4e33-b080-3e15f15d720e","commandName":"assign","packageName":"String","disabled":false,"attributes":[{"name":"sourceString","value":{"type":"STRING","expression":"$varLockingStatus.LegacyAutomation:parseVariableOperation$"}}],"returnTo":{"type":"VARIABLE","variableName":"varLockingStatus"}},{"uid":"3175eca1-9eec-4600-b06c-f31fcb1b93ff","commandName":"Comment","packageName":"Comment","disabled":true,"attributes":[{"name":"comment","value":{"type":"STRING","string":"0.2 Random delay if two machines trying to lock the folder simulatenously"}}]},{"uid":"1fa6e9f2-1b3a-4e12-a921-08f37eaa824f","commandName":"delay","packageName":"Delay","disabled":false,"attributes":[{"name":"from","value":{"type":"NUMBER","number":"1"}},{"name":"to","value":{"type":"NUMBER","number":"3"}},{"name":"timeUnit","value":{"type":"STRING","string":"SECONDS"}},{"name":"delayType","value":{"type":"STRING","string":"RANDOM"}}]},{"uid":"6295db05-00a0-4704-816e-7686d60a5a61","commandName":"Comment","packageName":"Comment","disabled":true,"attributes":[{"name":"comment","value":{"type":"STRING","string":"----------"}}]},{"uid":"07d24335-b01e-4a26-8535-db8df4031bff","commandName":"Comment","packageName":"Comment","disabled":true,"attributes":[{"name":"comment","value":{"type":"STRING","string":"1.1 Check if this machine has already locked the folder"}}]},{"uid":"d4868413-40f0-4549-8cff-30cd4ca45fa0","commandName":"systemInformation","packageName":"System","disabled":false,"attributes":[{"name":"systemNameBySelection","value":{"type":"STRING","string":"USERNAME","label":"USERNAME"}},{"name":"variableOption","value":{"type":"STRING","string":"BY_SELECTION"}}],"returnTo":{"type":"VARIABLE","variableName":"m-string-1"}},{"uid":"7f66f2fd-488b-45a8-9e22-c5bc01daee93","commandName":"if","packageName":"If","disabled":false,"children":[{"uid":"d4e2ea12-01ae-4ec5-946a-54395bcccb53","commandName":"assign","packageName":"String","disabled":false,"attributes":[{"name":"sourceString","value":{"type":"STRING","string":"true"}}],"returnTo":{"type":"VARIABLE","variableName":"varLockingStatus"}},{"uid":"7347c10f-741b-4c72-b55d-4e2443f90030","commandName":"assign","packageName":"String","disabled":false,"attributes":[{"name":"sourceString","value":{"type":"STRING","expression":"$varLockingStatus.LegacyAutomation:parseVariableOperation$"}}],"returnTo":{"type":"VARIABLE","variableName":"varLockingStatus"}},{"uid":"8e9d6715-593d-4e60-b3a6-4a5f3a06e5be","commandName":"stopTask","packageName":"TaskBot","disabled":false}],"branches":[],"attributes":[{"name":"condition","attributes":[{"name":"sourceFilePath","value":{"type":"FILE","expression":"file://$varFolder$/$System:Machine$.$m-string-1$.lock"}},{"name":"waitTimeout","value":{"type":"NUMBER","number":"0"}}],"value":{"type":"CONDITIONAL","conditionalName":"fileExists","packageName":"File"}}]},{"uid":"e5f89689-bded-4b7f-8233-86838eb235cc","commandName":"Comment","packageName":"Comment","disabled":true,"attributes":[{"name":"comment","value":{"type":"STRING","string":"1.2 Create lock file"}}]},{"uid":"32021b30-5724-40d7-9383-67aa4cedb07b","commandName":"systemInformation","packageName":"System","disabled":false,"attributes":[{"name":"systemNameBySelection","value":{"type":"STRING","string":"USERNAME","label":"USERNAME"}},{"name":"variableOption","value":{"type":"STRING","string":"BY_SELECTION"}}],"returnTo":{"type":"VARIABLE","variableName":"m-string-1"}},{"uid":"c013de96-6685-4f00-8d1d-45fb3e0f422c","commandName":"createFile","packageName":"File","disabled":false,"attributes":[{"name":"filePath","value":{"type":"FILE","expression":"file://$varFolder$/$System:Machine$.$m-string-1$.lock"}},{"name":"isOverwrite","value":{"type":"BOOLEAN","boolean":false}}]},{"uid":"6e432ddd-6f1d-42d0-991f-56c8b05338ba","commandName":"Comment","packageName":"Comment","disabled":true,"attributes":[{"name":"comment","value":{"type":"STRING","string":"----------"}}]},{"uid":"df79eb81-3191-4f17-87ca-e82afd58d39d","commandName":"Comment","packageName":"Comment","disabled":true,"attributes":[{"name":"comment","value":{"type":"STRING","string":"2. Check how many machines locked the folder"}}]},{"uid":"691d6c98-7244-4a5d-bea2-d17b3e34f19c","commandName":"assign","packageName":"String","disabled":false,"attributes":[{"name":"sourceString","value":{"type":"STRING","string":"0"}}],"returnTo":{"type":"VARIABLE","variableName":"varTemp"}},{"uid":"14420286-7bcf-431c-a3ff-dd59e2eb9bc7","commandName":"assign","packageName":"String","disabled":false,"attributes":[{"name":"sourceString","value":{"type":"STRING","expression":"$varTemp.LegacyAutomation:parseVariableOperation$"}}],"returnTo":{"type":"VARIABLE","variableName":"varTemp"}},{"uid":"b5af1126-7fa9-4809-b0c8-9befd1929df7","commandName":"assign","packageName":"String","disabled":false,"attributes":[{"name":"sourceString","value":{"type":"STRING","string":"0"}}],"returnTo":{"type":"VARIABLE","variableName":"Loop-Counter-1"}},{"uid":"a27f8863-0564-4187-aec5-f93022292173","commandName":"loop.commands.start","packageName":"Loop","disabled":false,"children":[{"uid":"491d19fc-f1af-4997-9411-f9ab24c3058b","commandName":"assign","packageName":"String","disabled":false,"attributes":[{"name":"sourceString","value":{"type":"STRING","expression":"$Loop-Counter-1.LegacyAutomation:getIncrementedNumber.Number:toString$"}}],"returnTo":{"type":"VARIABLE","variableName":"Loop-Counter-1"}},{"uid":"95ddb8b9-ee72-4a82-86e1-a407b6e6f1c7","commandName":"if","packageName":"If","disabled":false,"children":[{"uid":"a871a4e4-c686-40fd-b9e7-d5ead196e8aa","commandName":"assign","packageName":"String","disabled":false,"attributes":[{"name":"sourceString","value":{"type":"STRING","expression":"$varTemp$+1"}}],"returnTo":{"type":"VARIABLE","variableName":"varTemp"}},{"uid":"db639d4a-f431-44c2-a70c-68fa234542fa","commandName":"assign","packageName":"String","disabled":false,"attributes":[{"name":"sourceString","value":{"type":"STRING","expression":"$varTemp.LegacyAutomation:parseVariableOperation$"}}],"returnTo":{"type":"VARIABLE","variableName":"varTemp"}}],"branches":[],"attributes":[{"name":"condition","attributes":[{"name":"variable","value":{"type":"STRING","expression":"$Loop-Files-1{extension}$"}},{"name":"operator","value":{"type":"STRING","string":"EQ"}},{"name":"value","value":{"type":"STRING","string":"lock"}},{"name":"matchCase","value":{"type":"BOOLEAN","boolean":false}},{"name":"isIgnoreCarriage","value":{"type":"BOOLEAN","boolean":true}}],"value":{"type":"CONDITIONAL","conditionalName":"stringVariable","packageName":"String"}}]}],"attributes":[{"name":"iterator","returnTo":{"type":"VARIABLE","variableName":"Loop-Files-1"},"attributes":[{"name":"folderPath","value":{"type":"STRING","expression":"$varFolder$"}}],"value":{"type":"ITERATOR","iteratorName":"loop.iterators.files","packageName":"File"}},{"name":"loopType","value":{"type":"STRING","string":"ITERATOR"}}]},{"uid":"a99c16e6-0d77-455c-8750-c66a8ae6bc7b","commandName":"Comment","packageName":"Comment","disabled":true,"attributes":[{"name":"comment","value":{"type":"STRING","string":"If lockedBy>1 then remove the lock and set lockstatus=failed"}}]},{"uid":"6e486330-1509-4d1b-bc7c-c14961a372b7","commandName":"if","packageName":"If","disabled":false,"children":[{"uid":"f9e3e860-cbec-4f9c-9418-719d14966cba","commandName":"assign","packageName":"String","disabled":false,"attributes":[{"name":"sourceString","value":{"type":"STRING","string":"false"}}],"returnTo":{"type":"VARIABLE","variableName":"varLockingStatus"}},{"uid":"d5b1a821-640f-43df-937d-97b2f2e9020f","commandName":"assign","packageName":"String","disabled":false,"attributes":[{"name":"sourceString","value":{"type":"STRING","expression":"$varLockingStatus.LegacyAutomation:parseVariableOperation$"}}],"returnTo":{"type":"VARIABLE","variableName":"varLockingStatus"}},{"uid":"e8f6df3f-83be-49ae-9fee-5698c40d2527","commandName":"systemInformation","packageName":"System","disabled":false,"attributes":[{"name":"systemNameBySelection","value":{"type":"STRING","string":"USERNAME","label":"USERNAME"}},{"name":"variableOption","value":{"type":"STRING","string":"BY_SELECTION"}}],"returnTo":{"type":"VARIABLE","variableName":"m-string-1"}},{"uid":"630314bc-9d7b-4a74-a7df-a3c5251ebb7f","commandName":"deleteFiles","packageName":"File","disabled":false,"attributes":[{"name":"sizeValue","value":{"type":"STRING","string":"Atleast"}},{"name":"dateValue","value":{"type":"STRING","string":"Created"}},{"name":"filePath","value":{"type":"FILE","expression":"file://$varFolder$/$System:Machine$.$m-string-1$.lock*"}},{"name":"isSize","value":{"type":"BOOLEAN","boolean":false}},{"name":"isDate","value":{"type":"BOOLEAN","boolean":false}}]}],"branches":[{"uid":"b6e63bc2-e828-4e00-8a6e-7b6a4fee813b","commandName":"else","packageName":"If","disabled":false,"children":[{"uid":"f064b8e6-b43d-447b-9d64-4b5109cc0c0b","commandName":"assign","packageName":"String","disabled":false,"attributes":[{"name":"sourceString","value":{"type":"STRING","string":"true"}}],"returnTo":{"type":"VARIABLE","variableName":"varLockingStatus"}},{"uid":"284cb423-8957-44ce-a9a8-c460c7159ab7","commandName":"assign","packageName":"String","disabled":false,"attributes":[{"name":"sourceString","value":{"type":"STRING","expression":"$varLockingStatus.LegacyAutomation:parseVariableOperation$"}}],"returnTo":{"type":"VARIABLE","variableName":"varLockingStatus"}}]}],"attributes":[{"name":"condition","attributes":[{"name":"variable","value":{"type":"NUMBER","expression":"$varTemp.String:toNumber$"}},{"name":"operator","value":{"type":"STRING","string":"GT"}},{"name":"value","value":{"type":"NUMBER","number":"1"}}],"value":{"type":"CONDITIONAL","conditionalName":"numberVariable","packageName":"Number"}}]},{"uid":"fec0bbb3-b4b3-4a15-aad3-c01eae6d6732","commandName":"Comment","packageName":"Comment","disabled":true,"attributes":[{"name":"comment","value":{"type":"STRING","string":"----------"}}]}],"variables":[{"name":"varFolder","description":"","type":"STRING","subtype":"UNDEFINED","input":true,"output":true,"defaultValue":{"type":"STRING","string":""}},{"name":"varTemp","description":"","type":"STRING","subtype":"UNDEFINED","input":true,"output":true,"defaultValue":{"type":"STRING","string":""}},{"name":"varLockingStatus","description":"","type":"STRING","subtype":"UNDEFINED","input":true,"output":true,"defaultValue":{"type":"STRING","string":""}},{"name":"Loop-Files","description":"","type":"DICTIONARY","subtype":"STRING","input":false,"output":false},{"name":"Loop-Files-1","description":"","type":"DICTIONARY","subtype":"STRING","input":false,"output":false},{"name":"Loop-Counter-1","description":"","type":"STRING","subtype":"UNDEFINED","input":false,"output":false},{"name":"m-string-1","description":"","type":"STRING","subtype":"UNDEFINED","input":false,"output":false}],"breakpoints":[],"packages":[{"name":"Comment","version":"2.7.0-20210722-143743"},{"name":"Delay","version":"3.1.0-20210722-143809"},{"name":"File","version":"5.0.0-20210727-180900"},{"name":"If","version":"3.0.0-20210722-143856"},{"name":"LegacyAutomation","version":"4.4.0-20210803-013138"},{"name":"Loop","version":"3.0.0-20210722-144335"},{"name":"Number","version":"3.1.1-20210821-042642"},{"name":"String","version":"4.3.0-20210722-144812"},{"name":"System","version":"3.4.0-20210728-133940"},{"name":"TaskBot","version":"2.1.0-20210716-100552"}],"migrationJournalReviewIds":[],"workItemTemplateName":null,"properties":{"botCodeVersion":"1","improvedNumberSupport":false,"timeout":"0s","automationPriority":"PRIORITY_MEDIUM"}}